open ../engine/bindings/Synth;

let synth = (fn () -> 
  let trig = inlet 0. in
  sin_node 220. + sin_node 357.
    |> (*) (aslr_node 0. 1. 0.08 0.1 trig)
    |> (+) (white_noise_node ())
    |> tanh_node 5.
    |> (*) (aslr_node 0. 1. 0.05 0.1 trig)

  ;) |> play_tpl
;

let trig = fn () ->
  let fo = get_tl_tick () in
  set_input_trig_offset synth 0 fo
;;
