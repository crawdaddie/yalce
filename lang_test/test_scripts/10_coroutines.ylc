%test
let co = fn () ->
  yield 1.;
  yield 2.;
  yield 3.
;;

let test_iter_all = fn () ->
  let inst = co ();
  (match inst () with
  | Some 1. -> true
  | _ -> false
  ) && (
  match inst () with
  | Some 2. -> true
  | _ -> false
  ) && (
  match inst () with
  | Some 3. -> true
  | _ -> false
  ) && (
  match inst () with
  | None -> true
  | _ -> false
  )
;;

